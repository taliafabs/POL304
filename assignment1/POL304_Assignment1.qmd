---
title: "POL304 Assignment 1"
author: "Talia Fabregas"
date: "25 January 2024"
date-format: long
format: pdf
editor: visual
bibliography: references.bib
---

The code and data associated with the completion of this assignment can be accessed via [my GitHub repository](https://github.com/taliafabs/POL304.git).

```{r}
#| warning: false
#| message: false
## loading packages
# install.packages("tidyverse")
# install.packages("janitor")
# install.packages("dplyr")
# install.packages("knitr")
library(tidyverse)
library(janitor)
library(dplyr)
library(knitr)

## load the data
chechen_data <- read_csv("chechen.csv")

# time-varying confounder is controlled, as only 90 days before and after shelling are observed

## a sample from the data
kable(head(chechen_data))
```

## Question 1

The research question that this paper investigates is what the relationship is between a state's use of indiscriminate violence and insurgent attacks.

## Question 2

What is the theory used in the article? \[Word limit: 150 words\] Do not simply copy/paste from the article. Instead, think carefully what is the set of logically consistent assumptions that lead to the article's main prediction. Focus on the broad strokes rather than the details. Ask yourself what are the most basic relationships/conditions that must hold in order to derive the article's main prediction. List these assumptions and the relationship among them. For example, if the first assumption is that the Earth is flat and the second assumption is that the edge of the Earth is in the ocean, then a logically consistent prediction would be that we should observe water pouring off of the edge of the Earth into the void. Notice that neither the assumptions nor the prediction need to be true. The assumptions are simplifications of the world; the only requirement is that they are logically consistent with one another.

## Question 3

The central research hypothesis is...

## Question 4

@tbl-villagesshelled shows the number of villages that were shelled at least once by Russian Artillery and the number of villages that were not shelled during the period of interest. A total of 125 unique villages appear in the data set. Of those 125 villages, 75 were shelled at least once, and 50 were not shelled.

```{r}
#| warning: false
#| message: false
#| label: tbl-villagesshelled
#| tbl-cap: "The Number of Villages in the Data Set that Were and Were Not Shelled"
# count how many unique villages in the data set
num_villages <- length(unique(chechen_data$village))

# subset to only include the villages that were shelled at least once
shelled_observations<- chechen_data |>
  filter(fire == 1)

# count the number of unique villages that were shelled
num_shelled = length(unique(shelled_observations$village))

# get the number of unique villages that were not shelled
num_not_shelled = num_villages - num_shelled

# create a data frame
q4 <- data.frame(VillagesShelled = num_shelled,
                VillagesNotShelled = num_not_shelled)

# print the table for reference
kable(q4)
```

## Question 5

Based on the results of the cross-sectional analysis conducted, I would conclude that indiscriminate violence reduces insurgent attacks. @tbl-q5 shows the average number of insurgent attacks for shelled vs. non-shelled villages, and we can see that the difference in the average number of insurgent attacks between the shelled and non-shelled villages is \~0.55.

```{r}
#| warning: false
#| message: false
#| label: tbl-q5
#| tbl-cap: "The Average Number of Insurgent Attacks for Shelled vs. Non-Shelled Villages"

# Subset the data into observations that do not describe a shelled village
not_shelled_observations <- chechen_data |>
  filter(fire == 0)

# Already have the shelled observations from Question 4

# shelled villages
Y_shelled_after = mean(shelled_observations$postattack)

# non-shelled villages
Y_nonshelled_after = mean(not_shelled_observations$postattack)

q5 <- data.frame(
  MeanShelledAfter = Y_shelled_after,
  MeanNonShelledAfter = Y_nonshelled_after,
  # compute the mean number of insurgent attacks after the fires
  SATE = Y_shelled_after - Y_nonshelled_after
)

kable(q5)
```

## Question 6

As seen in @tbl-q6, the average number of insurgent attacks in the pre-shelling period (a pre-treatment variable for each of the treatment and control groups) for observations describing a shelling and for observations that do not are nearly identical, at 2.11 and 2.15, respectively. There is very little difference between this pre-treatment variable in the treatment and control groups, which suggests that the comparison in the previous question exhibits strong internal validity. Therefore, it is reasonable to believe that the treatment and control groups are identical on average in terms of all confounders (Chyzh, Lecture 2, Slide 15).

```{r}
#| warning: false
#| message: false
#| label: tbl-q6
#| tbl-cap: "Average Number of Insurgent Attacks during Pre-Shelling Periods in Shelled Village vs Non-Shelled Village Observations"

# Compute the mean number of insurgent attacks for observations that describe a shelled village
# and observations that do not during only the pre-shelling periods
avg_pre_shelled <- mean(shelled_observations$preattack)
avg_pre_not_shelled <- mean(not_shelled_observations$preattack)

# Create a data frame
q6 <- data.frame(
  Shelled = avg_pre_shelled,
  NotShelled = avg_pre_not_shelled
)

# Print the table using knitr
kable(q6)
```

## Question 7

Among observations in the data set that describe villages that were shelled, the number of insurgent attacks decreased after being fired on. @tbl-q7 shows the mean number of insurgent attacks in the pre- and post-shelling periods for observations that were shelled; the mean number of insurgent attacks decreased from \~2.11 before being fired on to \~1.5 after being fired on.

```{r}
#| warning: false
#| message: false
#| label: tbl-q7
#| tbl-cap: "Mean Number of Insurgent Attacks in Villages that Were Shelled, Before and After Being Fired On"

# Compare villages that were shelled before and after
q7 <- data.frame(
  mean_before=mean(shelled_observations$preattack),
  mean_after=mean(shelled_observations$postattack)
)

# Print the table for reference
kable(q7)
```

## Question 8

This analysis supports the claim that indiscriminate violence reduces insurgency attacks. @tbl-q8 shows the mean difference in the difference between insurgency attacks in the pre- and post-shelling periods for villages that were shelled and for villages that were not shelled. The mean difference between the pre- and post-shelling periods for villages that were shelled is \~0.616, while the mean difference in the pre- and post-shelling periods for villages that were not shelled is \~0.1. Therefore, the difference-in-difference analysis shows that villages that were shelled saw a greater reduction in insurgency attacks between the pre- and post-shelling periods than villages that were not shelled, which supports the claim that indiscriminate violence reduces insurgency attacks.

```{r}
#| warning: false
#| message: false
#| label: tbl-q8
#| tbl-cap: Mean Difference in Difference Between Pre- and Post-Shelling Villages for Villages that were Shelled vs Villages that were not

# mean shelled before - mean shelled after
shelled_difference = mean(shelled_observations$preattack) - 
  mean(shelled_observations$postattack)

# mean not shelled before - mean not shelled after
not_shelled_difference = mean(not_shelled_observations$preattack) -
  mean(not_shelled_observations$postattack)

# Compute the sample average treatment effect for the treated
satt = shelled_difference - not_shelled_difference

# create a data frame with these numbers
q8 <- data.frame(
  MeanDiffShelled = shelled_difference,
  MeanDiffNotShelled = not_shelled_difference,
  SATT = satt
)

# print the table to use for reference
kable(q8)

```

## Question 9

Which of the three designs--cross-sectional, temporal, or difference-in-difference--is the most appropriate, given whether or not the data meet the assumptions for each?

Cross-sectional assumptions:

Temporal assumptions:

Difference-in-difference assumptions:

The data meets these assumptions, therefore a \*\*\*\* approach is the most appropriate.

## References
